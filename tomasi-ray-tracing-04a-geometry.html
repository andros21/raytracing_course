<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Maurizio Tomasi maurizio.tomasi@unimi.it">
  <title>Lezione 4</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reset.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/theme/white.css" id="theme">
  <link rel="stylesheet" href="./css/custom.css"/>
  <link rel="stylesheet" href="./css/asciinema-player.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Lezione 4</h1>
  <p class="subtitle">Calcolo numerico per la generazione di immagini fotorealistiche</p>
  <p class="author">Maurizio Tomasi <a href="mailto:maurizio.tomasi@unimi.it" class="email">maurizio.tomasi@unimi.it</a></p>
</section>

<section id="equazione-del-rendering" class="slide level1">
<h1>Equazione del rendering</h1>
</section>
<section id="formulazione-dellequazione" class="slide level1">
<h1>Formulazione dell’equazione</h1>
<p>L’equazione che studieremo durante il corso è la seguente: <span class="math display">
\begin{aligned}
L(x \rightarrow \Theta) = &amp;L_e(x \rightarrow \Theta) +\\
&amp;\int_{\Omega_x} f_r(x, \Psi \rightarrow \Theta)\,L(x \leftarrow \Psi)\,\cos(N_x, \Psi)\,\mathrm{d}\omega_\Psi,
\end{aligned}
</span> dove <span class="math inline">L_e</span> è la radianza emessa dalla superficie nel punto <span class="math inline">x</span> lungo la direzione <span class="math inline">\Theta</span>.</p>
</section>
<section id="esempi-banali" class="slide level1">
<h1>Esempi banali</h1>
<ul>
<li><p>Assenza di radiazione: in questo caso <span class="math inline">L_e = 0</span> e <span class="math inline">\forall\Psi: L(x \leftarrow \Psi) = 0</span>, quindi</p>
<p><span class="math display">
L = 0.
</span></p>
<p>È una scena perfettamente buia: molto poco interessante!</p></li>
<li><p>Se un punto emette radiazione isotropa con radianza <span class="math inline">L_e</span> in <span class="math inline">x_0</span>, allora in ogni altro punto <span class="math inline">x</span> dello spazio vale che</p>
<p><span class="math display">
L(x_0 \rightarrow \Theta) = L_e
</span></p>
<p>Tutto lo spazio è riempito dalla medesima radianza: poco interessante!</p></li>
</ul>
</section>
<section id="esempio-più-complesso" class="slide level1">
<h1>Esempio più complesso</h1>
<p>Piano infinito diffusivo ideale e non emettente (<span class="math inline">L_e = 0</span>) e una sferetta di raggio <span class="math inline">r</span> a una distanza <span class="math inline">d \gg r</span> dal piano che emette isotropicamente con radianza <span class="math inline">L_d</span>.</p>
<p><img data-src="./media/plane.png" height="360" /></p>
</section>
<section id="esempio-più-complesso-1" class="slide level1">
<h1>Esempio più complesso</h1>
<p>Dato un punto <span class="math inline">x</span> sul piano, vale che:</p>
<p><span class="math display">
L(x \rightarrow \Theta) = \int_{2\pi} \frac{\rho_d}\pi\,L(x \leftarrow \Psi)\,\cos(N_x, \Psi)\,\mathrm{d}\omega_\Psi.
</span> Già qui le cose si complicano! Qual è il valore di <span class="math inline">L(x \leftarrow \Psi)</span>? (No, <em>non</em> è <span class="math inline">L_d</span>!)</p>
</section>
<section id="radianza-entrante" class="slide level1">
<h1>Radianza entrante</h1>
<p>Il valore di <span class="math inline">L(x \leftarrow \Psi)</span> è <strong>nullo</strong>, tranne quando <span class="math inline">\Psi</span> punta verso la sorgente luminosa. Dividiamo il dominio dell’integrale: <span class="math display">
\int_{2\pi} = \int_{\Omega(d)} + \int_{2\pi - \Omega{d}},
</span> dove <span class="math inline">\Omega(d)</span> è l’angolo solido della sfera alla distanza <span class="math inline">d</span>. Il secondo integrale è nullo, perché su quell’angolo solido <span class="math inline">L(x \leftarrow \Psi) = 0</span>.</p>
</section>
<section id="radianza-entrante-1" class="slide level1">
<h1>Radianza entrante</h1>
<p>L’integrale sull’angolo solido <span class="math inline">\Omega(d)</span> è semplice se supponiamo che nel dominio sia <span class="math inline">d</span> che l’angolo <span class="math inline">\theta</span> tra <span class="math inline">N_x</span> e <span class="math inline">\Psi</span> siano costanti (la sfera è piccola): <span class="math display">
L(x \rightarrow \Theta) = \int_{\Omega(d)} \frac{\rho_d}\pi\,L_d\,\cos(N_x, \Psi)\,\mathrm{d}\omega_\Psi \approx \frac{\rho_d}\pi\,L_d\,\cos\theta \times \pi\left(\frac{r}d\right)^2,
</span> dove <span class="math inline">\theta</span> è l’angolo tra la normale e la direzione della sferetta.</p>
</section>
<section id="proprietà-della-soluzione" class="slide level1">
<h1>Proprietà della soluzione</h1>
<ul>
<li><span class="math inline">L(x \rightarrow \Theta) \approx \rho_d\,L_d\,\cos\theta\,\left(\frac{r}d\right)^2.</span></li>
<li>Anche se il punto emette isotropicamente e la superficie è diffusiva ideale, c’è comunque una dipendenza dal coseno di <span class="math inline">\theta</span>.</li>
<li>La radianza riflessa è proporzionale alla superficie della sfera (<span class="math inline">\propto r^2</span>).</li>
<li>All’aumentare di <span class="math inline">d</span>, la radiazione emessa dal piano diminuisce come <span class="math inline">d^{-2}</span>.</li>
</ul>
</section>
<section id="doppio-piano" class="slide level1">
<h1>Doppio piano</h1>
<p>Supponiamo ora di avere <em>due</em> piani diffusivi ideali:</p>
<p><img data-src="./media/double-plane.png" height="360" /></p>
<p>Come si tratta questo caso?</p>
</section>
<section id="doppio-piano-1" class="slide level1">
<h1>Doppio piano</h1>
<p>Consideriamo ancora il piano sottostante. Vale che:</p>
<p><span class="math display">
L_\text{down}(x \rightarrow \Theta) = \int_{\Omega_x} \frac{\rho_d}\pi\,L(x \leftarrow \Psi)\,\cos(N_x, \Psi)\,\mathrm{d}\omega_\Psi.
</span> Ma ora l’integrale non è più una semplice delta di Dirac: oltre alla sferetta c’è il piano superiore. Qual è il valore di <span class="math inline">L_\text{up}(x \leftarrow \Psi)</span> prodotto dal piano superiore?</p>
</section>
<section id="doppio-piano-2" class="slide level1">
<h1>Doppio piano</h1>
<p>Il valore di <span class="math inline">L(x \leftarrow \Psi)</span> causato da una direzioneper il piano superiore si calcola con la stessa formula della slide precedente:</p>
<p><span class="math display">
L_\text{up}(x \rightarrow \Theta) = \int_{\Omega_x} \frac{\rho_d}\pi\,L(x \leftarrow \Psi)\,\cos(N_x, \Psi)\,\mathrm{d}\omega_\Psi.
</span></p>
<p>Ma così ci invischiamo in un problema ricorsivo!</p>
</section>
<section id="il-problema-generale" class="slide level1">
<h1>Il problema generale</h1>
<p>Nel caso generale avviene che l’integrale da calcolare è <em>multiplo</em>:</p>
<p><span class="math display">
L(x \rightarrow \Theta) = \int_{\Omega^{(1)}_x} \int_{\Omega^{(2)}_x} \int_{\Omega^{(3)}_x} \ldots
</span></p>
<p>È un integrale a molte dimensioni (i termini successivi al primo sono sempre meno importanti e tendono a zero, quindi le dimensioni non sono <em>infinite</em>).</p>
</section>
<section id="il-problema-generale-1" class="slide level1">
<h1>Il problema generale</h1>
<ul>
<li>L’equazione del rendering è impossibile da risolvere analiticamente nel caso generale.</li>
<li>Ecco quindi la necessità di usare il calcolo numerico</li>
<li>Il nostro codice dovrà implementare una serie di tipi geometrici</li>
</ul>
</section>
<section id="modellizzazione-di-oggetti" class="slide level1">
<h1>Modellizzazione di oggetti</h1>
</section>
<section class="slide level1">

<center>
<img data-src="./media/night-stand-photo.jpg" />
</center>
</section>
<section class="slide level1">

<center>
<img data-src="./media/night-stand-sketch.png" />
</center>
</section>
<section class="slide level1">

<center>
<img data-src="./media/night-stand-lines.png" />
</center>
</section>
<section class="slide level1">

<center>
<img data-src="./media/night-stand-vertexes.png" />
</center>
</section>
<section id="lezioni-imparate-oggi" class="slide level1">
<h1>Lezioni imparate oggi</h1>
</section>
<section class="slide level1">

<ul>
<li>Sempre definire in modo accurato le quantità misurabili (energia, flusso, radianza, etc.).</li>
<li>Assicurarsi di studiare un modello fisico in casi semplici (spazio vuoto, sferetta e piano, sferetta e due piani, etc.), per <em>capire</em> il modello prima di usarlo.</li>
<li>Il mondo è <em>complicato</em>! night-stand-lines.png night-stand-photo.jpg night-stand-sketch.png night-stand-vertexes.png</li>
</ul>
</section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@^4//dist/reveal.js"></script>

  // reveal.js plugins
  <script src="https://unpkg.com/reveal.js@^4//plugin/notes/notes.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/search/search.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
       // Parallax background image
       parallaxBackgroundImage: './media/background.png', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1440,
        height: 810,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script src="js/asciinema-player.js"></script>
    </body>
</html>
